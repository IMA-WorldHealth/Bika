<html>
    <head>
        <title>GRIDX BIKA</title>
        <link rel="stylesheet" href="./js/dojoos/dijit/themes/claro/claro.css" media="screen"/>
        <link rel="stylesheet" href="./js/dojoos/gridx/resources/claro/Gridx.css"/>
        <script src="./js/dojoos/dojo/dojo.js" data-dojo-config="async:true" ></script>
         <script>
            var dojoConfig = {
                //async true causes the HTML to be displayed before executing the javascript - there must be a fix for this
                async: false,
                isDebug: true,
                parseOnLoad: false
              };
        </script>

         <script>
  var accountSelect;
  require(["customizedModule/SelectX",
    "dojo/store/JsonRest",
    "dojo/domReady!"
    ], function (SelectX, JsonRest) {

    //construction requette pour entreprise_select
    var enterpriseSelect_query = {};
    var e = {t : 'entreprise', c : ['id', 'region', 'country', 'city', 'name', 'phone', 'email', 'type', 'cashAccount']}; //e pour entities
    enterpriseSelect_query.e = e;
    var requette = JSON.stringify(enterpriseSelect_query);

    var enterpriseSelect_store = new JsonRest({
      target: "/data",
      getLabel: function (data) {
        return data.name + "-" + data.region;
      }
    });

    var accountSelection_store = new JsonRest({
      target: 'data/account',
      getLabel: function (data) {
        return (data.id + "-" + data.accountTxt);
      }
    });

    accountSelect = new SelectX({
      store: accountSelection_store,
      style: "width: 220px", //update this shit
      query: '?q={"EnterpriseId":"' + 101 + '"}'
    }, "accountSelect");

    var enterpriseSelect = new SelectX({
      store: enterpriseSelect_store,
      style: "width: 135px",
      query: '?' + requette
    }, "enterpriseSelect");

    console.log("on est encore la !");

  });
  </script>

    </head>
    <body class = "claro">
     <div>

                <div id="headerSelection">
                    <div id="accountSelect"></div>
                    <span>From:</span>
                    <div id="dateSelectFrom"></div>
                    <span>To:</span>
                    <div id="dateSelectTo"></div>
                </div>

                <div id="masterGrid"></div>

                <div id="slaveContent">  
                    <div id="slaveGrid"></div>
                </div>

                <div id="footerSelection" style="position: fixed; left: 0px; bottom: 0px;">
                    <span>Enterprise</span>
                    <div id="enterpriseSelect"></div>
                    <span>Fiscal Year</span>
                    <div id="fiscalYearSelect"></div>
                </div>
        </div>
    </body>
</html>