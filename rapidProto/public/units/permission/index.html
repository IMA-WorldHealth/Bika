<html>
    <head>
        <title>USER PERMISSION</title>
        
        <link rel="stylesheet" href="./js/dojoos/dijit/themes/claro/claro.css" media="screen"/>
        <link rel="stylesheet" href="./js/dojoos/gridx/resources/claro/Gridx.css"/> 
        <link rel = "stylesheet" type = "text/css" href="../css/userPermission.css" media="screen" />
        <script>
        require([
         	"customizedModule/UnitsForm",
           "dojo/store/JsonRest",
           "dijit/form/TextBox",
           "dijit/form/CheckBox",
           "dijit/form/Button",
           "dojo/on",
           "dojo/Deferred",
           "dojo/topic",
           "dijit/Dialog",
           "dojo/dom-construct",
           "dojo/domReady!"
           ], function (UnitsForm, JsonRest,TextBox,CheckBox, Button, on, Deferred, topic, Dialog, domCons){
           	//declarations des variables
           	var bCreer, bAnnuler,bModifier,bSupprimer, txtFirstName, txtLastName, txtEmail,
           	 txtUserName, txtPassWord, txtConformPassWord, chkAdministrator,
              chkFinance, chkManager, chkDocteur, chkAdmin, roleStore,
               userGrid, userStore, roleGridQuery = {}, userGridQuery = {}, 
               crudStore, dataAdmin, dataFinance, dataManager, dataDoctor, dialog, roleGrid, fcAdmin, fcFinance, fcManager,fcDoctor;

           	  //creations champs des saisies
           	txtFirstName = new TextBox({class:"saisie", style:"width:220px;"},"firstnameID");
           	txtLastName = new TextBox({class:"saisie", style:"width:220px;"},"lastnameID");
           	txtEmail = new TextBox({class:"saisie", style:"width:220px;"},"emailID");
           	txtUserName = new TextBox({class:"saisie", style:"width:220px;"},"usernameID");
           	txtPassWord = new TextBox({class:"saisie", type:"password", style:"width:220px;"},"passwordID");
           	txtConformPassWord = new TextBox({class:"saisie", type:"password", style:"width:220px;"},"confirmpasswordID");

            //creation des boutons
            bCreer = new Button({label:"Creer", onClick:creer}, "creerID");
            bModifier = new Button({label:"Modifier", onClick:modifier}, "modifierID");
            bSupprimer = new Button({label:"Supprimer", onClick:supprimer}, "supprimerID");
            bAnnuler = new Button({label:"Annuler"},"annulerID");

           	//creation des cases a caucher
            /*chkAdministrator = new CheckBox({value:'Administrator'},"chkadministratorID");
           	chkAdmin = new CheckBox({value:'admin'},"chkadminID");
           	chkFinance = new CheckBox({value:'Finance'},"chkfinanceID");
           	chkManager = new CheckBox({value:'Manager'},"chkmanagerID");
           	chkDocteur = new CheckBox({value:'Docteur'},"chkdocteurID");*/

           	

            //stores
            //crudStore = new JsonRest({target:'/data/'});
             

            /* (function(){
              //formulaire pour admin role
              fcAdmin = new FormChooser({},"adminroleformID");
              var tabUnits = getUnits("admin");
              tabUnits.then(function(values){
                var node;
                for(var i = 0; i< values.length; i++) {
                      node = domCons.toDom("<div id=\""+values[i]+'ID'+"\"></div><span>"+values[i]+"</span><br/>"); 
                      domCons.place(node,"adminroleformID");
                      }
                      node = domCons.toDom("<div id=\""+"adminroleformIDAll"+"\"></div><span>"+"Tous"+"</span><br/>"); 
                      domCons.place(node,"adminroleformID");
                      node = domCons.toDom("<div id=\""+"adminroleformIDOK"+"\"></div>"); 
                      domCons.place(node,"adminroleformID");
                      fcAdmin.placeControls(values); 
                      fcAdmin.addLastCheck("adminroleformIDAll");
              new Button({label:'Ok', onClick:sauverAdmin}).placeAt(fcAdmin.domNode);
              fcAdmin.startup();
              });
            })();*/

           
           //	initUnitGrid();
           // initUserGrid();


           
         /*  function	initUnitGrid(){
            var hasWidget;
           	roleStore = new JsonRest({
                        target: '/data/'
                    });

                    var columns = [{
                        id: 'id',
                        field: 'id',
                        name: 'ID'
                    }, {
                        id: 'name',
                        field: 'name',
                        name: 'UNIT NAME'
                    }, {
                        id: 'desc',
                        field: 'desc',
                        name: 'UNIT DESCRIPTION'
                    }];

                    var e = [{t : 'unit', c : ['id', 'name', 'desc']}];                    
                    roleGridQuery.e = e;
                    var requetteGrid = JSON.stringify(roleGridQuery);

                    roleGrid = new Grid({
                        style: "height:300px;",
                        cacheClass: Cache,
                        store: roleStore,
                        query: '?'+requetteGrid,
                        structure: columns,
                        selectRowTriggerOnCell: true,
                        modules: [
                            CellWidget,
                            SingleSort,
                            Row
                            ]
                    }, "divTabRole");            
            roleGrid.startup();	

           	}*/

           /*  function initUserGrid(){
            userStore = new JsonRest({
                        target: '/data/'
                    });

                    var columns = [{
                        id: 'id',
                        field: 'id',
                        name: 'ID'
                    }, {
                        id: 'username',
                        field: 'username',
                        name: 'USER NAME'
                    }, {
                        id: 'email',
                        field: 'email',
                        name: 'EMAIL'
                    }];

                    var e = [{t : 'user', c : ['id', 'username', 'email']}];                    
                    userGridQuery.e = e;
                    var requetteGrid = JSON.stringify(userGridQuery);

                    userGrid = new Grid({
                        style: "height:240px;",
                        cacheClass: Cache,
                        store: userStore,
                        query: '?'+requetteGrid,
                        structure: columns,
                        selectRowTriggerOnCell: true,
                        modules: [
                            SingleSort,
                            ],
                    }, "sub");
            chkAdmin.startup();
            chkDocteur.startup();
            chkFinance.startup();
            chkManager.startup();
            chkAdministrator.startup();
            userGrid.startup(); 
            }*/

            //********************************************************
            //*******************LES FONCTIONS************************
            //********************************************************
            var creer = function(){

            }
            var modifier = function(){
              
            }
            var supprimer = function(){
              
            }
            var annuler = function(){
              
            }

            
        });
        </script>      
         

    </head>
    <body class = "claro">
     <div id="principal">
     	<div id="divForm">
     	    <form id="newuserformID">
	            <div><label><b>First Name :</b></label><div class="saisie" id="firstnameID"></div></div>
	            <br/>
	            <div><label><b>Last Name :</b></label><div class="saisie" id="lastnameID"></div></div>
	            <br/>
	            <div><label><b>Email :</b></label><div class="saisie" id="emailID"></div></div>
	            <br/>
	            <span id="spanbademailID"><div id="bademailID"></div></span>
	            <br/>
	            <div><label><b>User Name :</b></label><div  class="saisie" id="usernameID"></div></div>
	            <br/> 
	            <div><label><b>Password :</b></label><div class="saisie" id="passwordID"></div></div>
	            <br/>
	            <div><label><b>Confirm Password :</b></label><div class="saisie" id="confirmpasswordID"></div></div>
	            <br/>
              <span id="spanbadpasswordID"><div id="badpasswordID"></div></span><br/>
          </form>     		
     	</div> 
      <!--cette div contient des bouttons-->     
      <div id="divAction">
        <fieldset >
          <legend>Actions</legend>
          <div id="creerID"></div>
          <div id="modifierID"></div><br/>
          <div id="supprimerID"></div>
          <div id="annulerID"></div><br/>
        </fieldset>             		
     	</div>
      <!--cette div contient les checks box-->
      <div id="divformdroit">
        <form id="droitformID">
          <table>
            <tr id="ligneID">
            </tr>
          </table>
        </form>
      </div>      
    </div>
    <!-- cette div contient un grid listant les utilisateurs-->
    <div id="sub">      
    </div>
    </body>
</html>   

